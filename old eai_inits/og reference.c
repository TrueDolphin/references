// Patrol template -  
//ref array<vector> patrol_a  = {"5046.530762 9.257355 7293.361328", "5045.930664 9.534286 7250.209961"};
//ref array<vector> patrol_b  = {"5046.530762 9.257355 7293.361328", "5045.930664 9.534286 7250.209961"};
//ref array<vector> patrol_c  = {"5046.530762 9.257355 7293.361328", "5045.930664 9.534286 7250.209961"};
//ref array<vector> patrol_d  = {"5046.530762 9.257355 7293.361328", "5045.930664 9.534286 7250.209961"};
//ref array<vector> patrol_e  = {"5046.530762 9.257355 7293.361328", "5045.930664 9.534286 7250.209961"};

// patrol 1 - Paris
ref array<vector> patrol_1a  = {"2614.28 35.1122 3482.59", "2637.89 34.7324 3502.45", "2649.33 33.0476 3525.77", "2649.33 33.0476 3525.77", "2705.26 22.8186 3574.8", "2707.79 22.4635 3585.09", "2752.8 22.4625 3629.68", "2823.14 22.4625 3699.33", "2918.73 22.7593 3797.69", "2923.53 22.4625 3810.79", "2973.94 22.4625 3883.61", "3003.54 22.4625 3948.92", "3007.75 22.7279 3989.39", "3025.54 22.7257 4031.3", "3053.0 22.4625 4058.19", "3126.36 22.7551 4233.04", "3112.06 22.723 4235.07"};
ref array<vector> patrol_1b  = {"2614.28 35.1122 3482.59", "2637.89 34.7324 3502.45", "2649.33 33.0476 3525.77", "2649.33 33.0476 3525.77", "2705.26 22.8186 3574.8", "2707.79 22.4635 3585.09", "2752.8 22.4625 3629.68", "2823.14 22.4625 3699.33", "2918.73 22.7593 3797.69", "2923.53 22.4625 3810.79", "2973.94 22.4625 3883.61", "3003.54 22.4625 3948.92", "3007.75 22.7279 3989.39", "3025.54 22.7257 4031.3", "3053.0 22.4625 4058.19", "3126.36 22.7551 4233.04", "3112.06 22.723 4235.07"};
ref array<vector> patrol_1c  = {"2614.28 35.1122 3482.59", "2637.89 34.7324 3502.45", "2649.33 33.0476 3525.77", "2649.33 33.0476 3525.77", "2705.26 22.8186 3574.8", "2707.79 22.4635 3585.09", "2752.8 22.4625 3629.68", "2823.14 22.4625 3699.33", "2918.73 22.7593 3797.69", "2923.53 22.4625 3810.79", "2973.94 22.4625 3883.61", "3003.54 22.4625 3948.92", "3007.75 22.7279 3989.39", "3025.54 22.7257 4031.3", "3053.0 22.4625 4058.19", "3126.36 22.7551 4233.04", "3112.06 22.723 4235.07"};
ref array<vector> patrol_1d  = {"2614.28 35.1122 3482.59", "2637.89 34.7324 3502.45", "2649.33 33.0476 3525.77", "2649.33 33.0476 3525.77", "2705.26 22.8186 3574.8", "2707.79 22.4635 3585.09", "2752.8 22.4625 3629.68", "2823.14 22.4625 3699.33", "2918.73 22.7593 3797.69", "2923.53 22.4625 3810.79", "2973.94 22.4625 3883.61", "3003.54 22.4625 3948.92", "3007.75 22.7279 3989.39", "3025.54 22.7257 4031.3", "3053.0 22.4625 4058.19", "3126.36 22.7551 4233.04", "3112.06 22.723 4235.07"};
ref array<vector> patrol_1e  = {"2614.28 35.1122 3482.59", "2637.89 34.7324 3502.45", "2649.33 33.0476 3525.77", "2649.33 33.0476 3525.77", "2705.26 22.8186 3574.8", "2707.79 22.4635 3585.09", "2752.8 22.4625 3629.68", "2823.14 22.4625 3699.33", "2918.73 22.7593 3797.69", "2923.53 22.4625 3810.79", "2973.94 22.4625 3883.61", "3003.54 22.4625 3948.92", "3007.75 22.7279 3989.39", "3025.54 22.7257 4031.3", "3053.0 22.4625 4058.19", "3126.36 22.7551 4233.04", "3112.06 22.723 4235.07"};

// patrol 2 - portland
ref array<vector> patrol_2a  = {"6137.18 8.1828 14667.3", "6127.65 8.1598 14655.7", "6127.19 6.34518 14647.1", "6148.16 6.02 14647.3", "6148.73 6.02 14702.1", "6168.66 6.00306 14728.6", "6169.38 6.014 14824.4", "6165.39 6.014 14827.5", "6053.98 6.031 14827.0", "6037.31 6.019 14826.6", "6037.33 6.02 14830.5", "5950.27 6.02 14830.1", "5937.34 6.0199 14822.4", "5933.13 6.01682 14809.5", "5933.28 6.01995 14585.2", "5961.84 6.01966 14568.8", "6145.52 6.02156 14568.7", "6145.21 6.01999 14584.8", "6148.13 6.01999 14584.8", "6147.86 6.02 14638.8", "6132.03 6.34517 14638.9", "6135.35 8.18288 14612"};
ref array<vector> patrol_2b  = {"6137.18 8.1828 14667.3", "6127.65 8.1598 14655.7", "6127.19 6.34518 14647.1", "6148.16 6.02 14647.3", "6148.73 6.02 14702.1", "6168.66 6.00306 14728.6", "6169.38 6.014 14824.4", "6165.39 6.014 14827.5", "6053.98 6.031 14827.0", "6037.31 6.019 14826.6", "6037.33 6.02 14830.5", "5950.27 6.02 14830.1", "5937.34 6.0199 14822.4", "5933.13 6.01682 14809.5", "5933.28 6.01995 14585.2", "5961.84 6.01966 14568.8", "6145.52 6.02156 14568.7", "6145.21 6.01999 14584.8", "6148.13 6.01999 14584.8", "6147.86 6.02 14638.8", "6132.03 6.34517 14638.9", "6135.35 8.18288 14612"};
ref array<vector> patrol_2c  = {"6137.18 8.1828 14667.3", "6127.65 8.1598 14655.7", "6127.19 6.34518 14647.1", "6148.16 6.02 14647.3", "6148.73 6.02 14702.1", "6168.66 6.00306 14728.6", "6169.38 6.014 14824.4", "6165.39 6.014 14827.5", "6053.98 6.031 14827.0", "6037.31 6.019 14826.6", "6037.33 6.02 14830.5", "5950.27 6.02 14830.1", "5937.34 6.0199 14822.4", "5933.13 6.01682 14809.5", "5933.28 6.01995 14585.2", "5961.84 6.01966 14568.8", "6145.52 6.02156 14568.7", "6145.21 6.01999 14584.8", "6148.13 6.01999 14584.8", "6147.86 6.02 14638.8", "6132.03 6.34517 14638.9", "6135.35 8.18288 14612"};
ref array<vector> patrol_2d  = {"6137.18 8.1828 14667.3", "6127.65 8.1598 14655.7", "6127.19 6.34518 14647.1", "6148.16 6.02 14647.3", "6148.73 6.02 14702.1", "6168.66 6.00306 14728.6", "6169.38 6.014 14824.4", "6165.39 6.014 14827.5", "6053.98 6.031 14827.0", "6037.31 6.019 14826.6", "6037.33 6.02 14830.5", "5950.27 6.02 14830.1", "5937.34 6.0199 14822.4", "5933.13 6.01682 14809.5", "5933.28 6.01995 14585.2", "5961.84 6.01966 14568.8", "6145.52 6.02156 14568.7", "6145.21 6.01999 14584.8", "6148.13 6.01999 14584.8", "6147.86 6.02 14638.8", "6132.03 6.34517 14638.9", "6135.35 8.18288 14612"};
ref array<vector> patrol_2e  = {"6137.18 8.1828 14667.3", "6127.65 8.1598 14655.7", "6127.19 6.34518 14647.1", "6148.16 6.02 14647.3", "6148.73 6.02 14702.1", "6168.66 6.00306 14728.6", "6169.38 6.014 14824.4", "6165.39 6.014 14827.5", "6053.98 6.031 14827.0", "6037.31 6.019 14826.6", "6037.33 6.02 14830.5", "5950.27 6.02 14830.1", "5937.34 6.0199 14822.4", "5933.13 6.01682 14809.5", "5933.28 6.01995 14585.2", "5961.84 6.01966 14568.8", "6145.52 6.02156 14568.7", "6145.21 6.01999 14584.8", "6148.13 6.01999 14584.8", "6147.86 6.02 14638.8", "6132.03 6.34517 14638.9", "6135.35 8.18288 14612"};

// patrols - area 42
//Area 42 - airfield heli guards
ref array<vector> patrol_3a  = {"13469.2 12.9525 9603.42", "13432.9 12.9525 9608.83", "13438.3 12.9172 9657.9", "13489.3 12.9525 9651.27", "13488.5 12.9525 9637.62", "13542.0 12.9525 9630.26"};
ref array<vector> patrol_3b  = {"13469.2 12.9525 9603.42", "13432.9 12.9525 9608.83", "13438.3 12.9172 9657.9", "13489.3 12.9525 9651.27", "13488.5 12.9525 9637.62", "13542.0 12.9525 9630.26"};
ref array<vector> patrol_3c  = {"13469.2 12.9525 9603.42", "13432.9 12.9525 9608.83", "13438.3 12.9172 9657.9", "13489.3 12.9525 9651.27", "13488.5 12.9525 9637.62", "13542.0 12.9525 9630.26"};
//Area 42 - Near farm base guards
ref array<vector> patrol_4a  = {"13605.3 12.922 9866.76", "13493.5 12.922 9873.86", "13489.6 12.922 9884.22", "13498.3 12.922 9931.7", "13482.2 12.8804 9946.66", "13426 12.95 9973.23", "13402.3 12.95 9978.1", "13399.0 12.95 9919.61", "13394.2 12.92 9857.08", "13397.2 12.922 9842.91", "13401.9 13.13 9843.68"};
ref array<vector> patrol_4b  = {"13605.3 12.922 9866.76", "13493.5 12.922 9873.86", "13489.6 12.922 9884.22", "13498.3 12.922 9931.7", "13482.2 12.8804 9946.66", "13426 12.95 9973.23", "13402.3 12.95 9978.1", "13399.0 12.95 9919.61", "13394.2 12.92 9857.08", "13397.2 12.922 9842.91", "13401.9 13.13 9843.68"};
ref array<vector> patrol_4c  = {"13605.3 12.922 9866.76", "13493.5 12.922 9873.86", "13489.6 12.922 9884.22", "13498.3 12.922 9931.7", "13482.2 12.8804 9946.66", "13426 12.95 9973.23", "13402.3 12.95 9978.1", "13399.0 12.95 9919.61", "13394.2 12.92 9857.08", "13397.2 12.922 9842.91", "13401.9 13.13 9843.68"};
ref array<vector> patrol_4d  = {"13605.3 12.922 9866.76", "13493.5 12.922 9873.86", "13489.6 12.922 9884.22", "13498.3 12.922 9931.7", "13482.2 12.8804 9946.66", "13426 12.95 9973.23", "13402.3 12.95 9978.1", "13399.0 12.95 9919.61", "13394.2 12.92 9857.08", "13397.2 12.922 9842.91", "13401.9 13.13 9843.68"};

//Area 42 - Left entry
//need to change this
ref array<vector> patrol_5a  = {"12886.8 12.95 9914.24", "12945.5 12.95 9913.85", "12945.6 12.95 9917.58", "12948.3 12.95 9917.97", "12948.8 12.95 9914.33", "12955.7 12.95 9914.64", "12961.5 12.95 9919.56", "12961.0 12.95 9943.94"};

//Area 42 - Right entry
//need to change this
ref array<vector> patrol_6a  = {"12887.1 12.95 9898.71", "12945.7 12.95 9899.2", "12945.6 12.95 9895.71", "12949.2 12.95 9895.47", "12949.3 12.95 9899.24", "12956.0 12.95 9899.16", "12989.2 12.95 9871.37"};


//statics
//none atm

// If you add another patrol array, add it to this list
ref array<array<vector>> patrol_list = {patrol_1a, patrol_1b, patrol_1c, patrol_1d, patrol_1e, patrol_2a, patrol_2b, patrol_2c, patrol_2d, patrol_2e, patrol_3a, patrol_3b, patrol_3c, patrol_4a, patrol_4b, patrol_4c, patrol_4d, patrol_5a, patrol_6a};

// IMPORTANT: If you add an entry to the above list, pick the loadout for it by adding the loadout filename to this list
// Default loadouts - 
// SoldierLoadout.json
// HumanLoadout.json
// PoliceLoadout.json - custom
ref array<string> patrol_loadouts = {"PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json", "PoliceLoadout.json"};


// you may change these quantities
const int NUMBER_PER_PATROL = 1;	// Number of AI per patrol
const int MAXR = 800;				// This is the main spawn radius- how close a player needs to be to spawn them in.
const int MINR = 100;				// If a player is this close to the patrol start point, it is too close for them to spawn
const int DESPAWNR = 1000;			// If all players are this far away, they despawn.
const int RESPAWN_SECONDS = 300;	// The amount of seconds before a new patrol will spawn, after they both die


class CustomPatrol : eAIDynamicPatrol {
	override void OnPatrolSpawn(eAIGroup patrol) {
		// Uncomment this line to change the faction of the patrol from Raiders (default)
		// eAIFactionGuards for example is a faction which only kills players who have their weapons out
		patrol.SetFaction(new eAIFactionWest());
		
		// Uncomment this line to slow down or speed up the patrol (1.0 to 3.0)
	    patrol.SetSpeedLimit(1.0);
	}
	override void OnUnitSpawn(eAIBase unit) {
		// Uncomment this to give the AI unlimited magazines (new one is added on reload)
		// unit.SetUnlimitedMags(true);
		
		// You can also do anything you would do in the StartingEquipSetup() for players here
		
		// These lines will add attachments the same way you would for a player. However, the AI must have the M4A1 class in the Loadout.json file already for it to work.
		Weapon_Base weapon = Weapon_Base.Cast(unit.GetItemInHands());
		weapon.GetInventory().CreateAttachment("SNAFU_MPX_Suppressor_Black");
		weapon.GetInventory().CreateAttachment("ACOGOptic");
		//weapon.GetInventory().CreateAttachment("M4_CarryHandleOptic");
	}
};

autoptr array<autoptr eAIDynamicPatrol> patrols = {};

void InitDynamicPatrols() {
	for (int i = 0; i < patrol_list.Count(); i++) {
		string loadout = "PoliceLoadout.json"; // default
		if (i < patrol_loadouts.Count()) loadout = patrol_loadouts[i];
		autoptr CustomPatrol pat = new CustomPatrol(patrol_list[i][0], patrol_list[i], loadout, NUMBER_PER_PATROL, MINR, MAXR, DESPAWNR, RESPAWN_SECONDS);
		patrols.Insert(pat);
		pat.UpdateTriggers();
	}
}

void SpawnSentry(vector pos, string loadout = "PoliceLoadout.json") {
	eAIGame game = MissionServer.Cast(GetGame().GetMission()).GetEAIGame();
	eAIBase ai = game.SpawnAI_Sentry(pos, loadout);
}

modded class CustomMission
{
	void StartingEquipSetup(PlayerBase player, bool clothesChosen)
	{
		m_eaiGame.GetGroupByLeader(player);
		super.StartingEquipSetup(player, clothesChosen);
	}
};